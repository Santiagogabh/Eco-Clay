import{r as m,a as ve,L as q,R,u as fe,b as Ne,B as we,d as Ce,e as O,N as ee}from"./vendor-Bf1DWiml.js";import{M as ke,T as _e,C as Ee,a as ae,P as se,L as te}from"./maps-BFYQehQ8.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function n(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(r){if(r.ep)return;r.ep=!0;const c=n(r);fetch(r.href,c)}})();var me={exports:{}},G={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pe=m,Se=Symbol.for("react.element"),Me=Symbol.for("react.fragment"),De=Object.prototype.hasOwnProperty,$e=Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ae={key:!0,ref:!0,__self:!0,__source:!0};function he(a,s,n){var l,r={},c=null,p=null;n!==void 0&&(c=""+n),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(p=s.ref);for(l in s)De.call(s,l)&&!Ae.hasOwnProperty(l)&&(r[l]=s[l]);if(a&&a.defaultProps)for(l in s=a.defaultProps,s)r[l]===void 0&&(r[l]=s[l]);return{$$typeof:Se,type:a,key:c,ref:p,props:r,_owner:$e.current}}G.Fragment=Me;G.jsx=he;G.jsxs=he;me.exports=G;var e=me.exports,ue,re=ve;ue=re.createRoot,re.hydrateRoot;const pe=a=>`ecoclay_${a}`;function H(a){try{const s=localStorage.getItem(pe(a));return s?JSON.parse(s):[]}catch{return[]}}function le(a,s){localStorage.setItem(pe(a),JSON.stringify(s))}function ne(a,s){if(!s)return a;const n=s.startsWith("-"),l=n?s.slice(1):s;return[...a].sort((r,c)=>r[l]===c[l]?0:(r[l]>c[l]?1:-1)*(n?-1:1))}function X(a){return{async list(s){const n=H(a);return ne(n,s)},async filter(s={},n){const l=H(a).filter(r=>Object.entries(s).every(([c,p])=>r[c]===p));return ne(l,n)},async create(s){const n=H(a),l=crypto.randomUUID(),r=new Date().toISOString(),c={id:l,created_date:r,...s};return n.push(c),le(a,n),c},async update(s,n){const l=H(a),r=l.findIndex(c=>c.id===s);if(r>=0)return l[r]={...l[r],...n},le(a,l),l[r];throw new Error(`${a} with id ${s} not found`)}}}const F=X("CleanupEvent");function C({children:a,className:s="",variant:n="default",size:l="md",...r}){const c="inline-flex items-center justify-center font-medium transition-colors focus:outline-none disabled:opacity-50 disabled:pointer-events-none",p={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-12 px-6",icon:"h-10 w-10"},b={default:"bg-gray-900 text-white hover:bg-gray-800 rounded-md",outline:"border border-gray-200 hover:bg-gray-50 rounded-md"};return e.jsx("button",{className:`${c} ${p[l]||p.md} ${b[n]||b.default} ${s}`,...r,children:a})}function _({children:a,className:s="",variant:n="default",...l}){const r="inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium",c={default:"bg-gray-100 text-gray-800",outline:"border border-gray-300 text-gray-700"};return e.jsx("span",{className:`${r} ${c[n]||c.default} ${s}`,...l,children:a})}function B({children:a,className:s=""}){return e.jsx("div",{className:`border border-gray-200 bg-white rounded-2xl ${s}`,children:a})}function Le({children:a,className:s=""}){return e.jsx("div",{className:`p-4 border-b border-gray-100 ${s}`,children:a})}function Ue({children:a,className:s=""}){return e.jsx("h3",{className:`text-lg font-semibold ${s}`,children:a})}function T({children:a,className:s=""}){return e.jsx("div",{className:`p-4 ${s}`,children:a})}var Oe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ze=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ie=(a,s)=>{const n=m.forwardRef(({color:l="currentColor",size:r=24,strokeWidth:c=2,absoluteStrokeWidth:p,children:b,...d},N)=>m.createElement("svg",{ref:N,...Oe,width:r,height:r,stroke:l,strokeWidth:p?Number(c)*24/Number(r):c,className:`lucide lucide-${ze(a)}`,...d},[...s.map(([w,t])=>m.createElement(w,t)),...(Array.isArray(b)?b:[b])||[]]));return n.displayName=`${a}`,n};var f=Ie;const Fe=f("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Re=f("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ge=f("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Be=f("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),ie=f("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),A=f("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Te=f("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Ze=f("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),qe=f("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ce=f("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),D=f("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),L=f("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ye=f("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),oe=f("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),He=f("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ve=f("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),V=f("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),de=f("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function S(a){const s=new Map([["Map","/map"],["Events","/events"],["Donations","/donations"],["Profile","/profile"],["CreateEvent","/create-event"]]);return a&&a.startsWith("Donations?")?`/donations${a.slice(9)}`:s.get(a)||"/map"}const xe=[{id:1,name:"Kennedy - Patio Bonito",upz:"UPZ 80 Patio Bonito / UPZ 39 Kennedy Central",address:"Av. Ciudad de Cali con Calle 38 Sur",coordinates:[4.6097,-74.1506],priority:"high",level:"Alto",description:"Alta densidad vehicular y emisiones cerca de Portal Américas",color:"#ef4444"},{id:2,name:"Bosa - El Porvenir",upz:"UPZ 86 El Porvenir / UPZ 83 Bosa Occidental",address:"Calle 69 Sur con Carrera 78G",coordinates:[4.5847,-74.1742],priority:"high",level:"Alto",description:"Zona industrial sin zonas verdes, límite con Soacha",color:"#ef4444"},{id:3,name:"Ciudad Bolívar - Mochuelo Bajo",upz:"UPZ 67 Mochuelo Bajo / UPZ 69 El Tesoro",address:"Vía al Relleno Sanitario Doña Juana",coordinates:[4.5234,-74.1836],priority:"high",level:"Alto",description:"Acumulación de residuos y escombros cerca del relleno sanitario",color:"#ef4444"},{id:4,name:"Puente Aranda - San Rafael",upz:"UPZ 43 San Rafael / Carvajal",address:"Calle 3ra con Carrera 53",coordinates:[4.6351,-74.1201],priority:"high",level:"Alto",description:"Zona industrial cerca a Av. 68 y Av. de Las Américas",color:"#ef4444"},{id:5,name:"Tunjuelito - Venecia",upz:"UPZ 55 Venecia / UPZ 54 San Carlos",address:"Calle 47B Sur con Carrera 24",coordinates:[4.5892,-74.1372],priority:"medium",level:"Medio",description:"Fluctuaciones por condiciones de viento y congestión vehicular",color:"#f59e0b"},{id:6,name:"Fontibón - Centro",upz:"UPZ 98 Fontibón Centro / UPZ 97 Capellanía",address:"Calle 19 con Carrera 100",coordinates:[4.6704,-74.1436],priority:"medium",level:"Medio",description:"Influencia de tráfico aéreo y carga industrial",color:"#f59e0b"},{id:7,name:"Suba - Rincón",upz:"UPZ 71 Suba Rincón / UPZ 72 Tibabuyes",address:"Calle 129 con Avenida Suba",coordinates:[4.7582,-74.0861],priority:"medium",level:"Medio",description:"Afectación ocasional por tráfico denso y urbanización",color:"#f59e0b"},{id:8,name:"Suba - Mazurén",upz:"UPZ 75 Niza Norte",address:"Calle 152 con Autopista Norte",coordinates:[4.7889,-74.0536],priority:"low",level:"Bajo",description:"Buena arborización y planeación urbana",color:"#22c55e"},{id:9,name:"Suba - Colina Campestre",upz:"UPZ 76",address:"Calle 138 con Carrera 58",coordinates:[4.7736,-74.0694],priority:"low",level:"Bajo",description:"Sector residencial con bajo impacto industrial y buena ventilación",color:"#22c55e"}];function Ge(){const[a,s]=m.useState([]),[n,l]=m.useState(null),[r,c]=m.useState(!0);m.useEffect(()=>{p()},[]);const p=async()=>{try{const t=await F.list("-created_date");s(t)}catch(t){console.error("Error loading events:",t)}finally{c(!1)}},b=t=>{const g={high:{color:"#ef4444",icon:"🔴"},medium:{color:"#f59e0b",icon:"🟡"},low:{color:"#22c55e",icon:"🟢"}};return te.divIcon({className:"custom-zone-marker",html:`
        <div style="
          background: ${g[t].color};
          width: 40px;
          height: 40px;
          border-radius: 50%;
          border: 3px solid white;
          box-shadow: 0 4px 16px rgba(0,0,0,0.2);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 14px;
        ">
          ${g[t].icon}
        </div>
      `,iconSize:[40,40],iconAnchor:[20,20]})},d=t=>{const g={upcoming:"#22c55e",active:"#0ea5e9",completed:"#a855f7"};return te.divIcon({className:"custom-marker",html:`
        <div style="
          background: ${g[t]};
          width: 30px;
          height: 30px;
          border-radius: 50%;
          border: 3px solid white;
          box-shadow: 0 4px 12px rgba(0,0,0,0.15);
          display: flex;
          align-items: center;
          justify-content: center;
        ">
          <div style="
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
          "></div>
        </div>
      `,iconSize:[30,30],iconAnchor:[15,15]})},N=t=>({high:{label:"Alta Prioridad",className:"bg-red-100 text-red-700"},medium:{label:"Prioridad Media",className:"bg-yellow-100 text-yellow-700"},low:{label:"Prioridad Baja",className:"bg-green-100 text-green-700"}})[t],w=t=>({high:Re,medium:Fe,low:Te})[t];return r?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded-2xl w-48 clay-card"}),e.jsx("div",{className:"h-96 bg-gray-200 rounded-2xl clay-card"})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-left",children:"Zonas más contaminadas"}),e.jsx("p",{className:"text-gray-600",children:"Necesitan de tu colaboración en este momento"})]}),e.jsx(q,{to:S("CreateEvent"),children:e.jsxs(C,{className:"clay-button bg-mint-400 hover:bg-mint-500 text-white rounded-2xl px-6",children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Crear Evento"]})})]}),e.jsx("div",{className:"clay-card overflow-hidden",style:{height:"500px"},children:e.jsxs(ke,{center:[4.711,-74.0721],zoom:11,style:{height:"100%",width:"100%"},children:[e.jsx(_e,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),xe.map(t=>e.jsxs(R.Fragment,{children:[e.jsx(Ee,{center:t.coordinates,radius:1500,pathOptions:{color:t.color,fillColor:t.color,fillOpacity:.15,weight:2}}),e.jsx(ae,{position:t.coordinates,icon:b(t.priority),eventHandlers:{click:()=>l(t)},children:e.jsx(se,{children:e.jsxs("div",{className:"p-3 min-w-[250px]",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.upz}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(L,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:t.address})]}),e.jsxs(_,{className:`${N(t.priority).className} rounded-full mb-2`,children:["Contaminación ",t.level]}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description})]})})})]},t.id)),a.map(t=>t.latitude&&t.longitude&&e.jsx(ae,{position:[t.latitude,t.longitude],icon:d(t.status),children:e.jsx(se,{children:e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.address}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(A,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:[t.date," - ",t.time]})]})]})})},t.id))]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Zonas afectadas por prioridad"}),["high","medium","low"].map(t=>{const g=xe.filter(v=>v.priority===t),E=N(t),k=w(t);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:`w-6 h-6 ${t==="high"?"text-red-500":t==="medium"?"text-yellow-500":"text-green-500"}`}),e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:E.label})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:g.map(v=>e.jsx(B,{className:"clay-card hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>l(v),children:e.jsxs(T,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-800",children:v.name}),e.jsx("p",{className:"text-sm text-gray-500",children:v.upz})]}),e.jsx(_,{className:`${E.className} rounded-full text-xs`,children:v.level})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(L,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:v.address})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:v.description})]})},v.id))})]},t)})]}),a.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Eventos de Limpieza Activos"}),e.jsx("div",{className:"grid gap-4",children:a.filter(t=>t.status==="upcoming").map(t=>{var g;return e.jsxs("div",{className:"clay-card p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:t.address})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.date," a las ",t.time]})]})]}),e.jsx(_,{className:"bg-mint-100 text-mint-700 rounded-full",children:"Próximo"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[((g=t.participants)==null?void 0:g.length)||0," participantes"]})]}),e.jsx(q,{to:S(`EventDetail?id=${t.id}`),children:e.jsx(C,{className:"clay-button bg-baby-blue-400 hover:bg-baby-blue-500 text-white rounded-2xl",children:"Ver Detalles"})})]})]},t.id)})})]})]})}const Q="ecoclay_user";function Je(){try{return JSON.parse(localStorage.getItem(Q))}catch{return null}}function Ke(a){localStorage.setItem(Q,JSON.stringify(a))}const Z={async me(){return Je()},async login(){const a=prompt("Ingresa tu email (simulación de login Google):");if(!a)return null;const s=a.split("@")[0],n={email:a,full_name:s};return Ke(n),n},async logout(){localStorage.removeItem(Q)}},J=X("Participation");function K({value:a,onValueChange:s,defaultValue:n,children:l,className:r=""}){const[c,p]=R.useState(n||a),b=a!==void 0?a:c,d=s||p;return e.jsx("div",{className:r,children:R.Children.map(l,N=>R.isValidElement(N)?R.cloneElement(N,{tabsValue:b,setTabsValue:d}):N)})}function Y({children:a,className:s=""}){return e.jsx("div",{className:s,children:a})}function z({value:a,children:s,className:n="",tabsValue:l,setTabsValue:r}){const c=l===a;return e.jsx("button",{type:"button","data-state":c?"active":"inactive",className:n,onClick:()=>r&&r(a),children:s})}function I({value:a,children:s,className:n="",tabsValue:l}){return l!==a?null:e.jsx("div",{className:n,children:s})}function Ye({open:a,onOpenChange:s,children:n}){return R.useEffect(()=>{function l(r){r.key==="Escape"&&s&&s(!1)}return a&&document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[a,s]),a?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>s&&s(!1)}),e.jsx("div",{className:"relative z-10 bg-white rounded-2xl w-[90%] max-w-xl shadow-xl",children:n})]}):null}function We({children:a,className:s=""}){return e.jsx("div",{className:`p-4 ${s}`,children:a})}function Xe({children:a}){return e.jsx("div",{className:"mb-2",children:a})}function Qe({children:a,className:s=""}){return e.jsx("h3",{className:`text-lg font-semibold ${s}`,children:a})}function ea(){var u;const[a,s]=m.useState([]),[n,l]=m.useState([]),[r,c]=m.useState(null),[p,b]=m.useState(!0),[d,N]=m.useState(null),[w,t]=m.useState(!1);m.useEffect(()=>{g()},[]);const g=async()=>{try{const[i,h]=await Promise.all([F.list("-created_date"),Z.me()]);if(s(i),c(h),h){const M=await J.filter({user_email:h.email},"-created_date");l(M)}}catch(i){console.error("Error loading data:",i)}finally{b(!1)}},E=async i=>{try{await J.create({event_id:i,user_email:r.email,joined_date:new Date().toISOString().split("T")[0]}),g()}catch(h){console.error("Error joining event:",h)}},k=()=>{const i=n.map(h=>h.event_id);return a.filter(h=>i.includes(h.id))},v=()=>{const i=n.map(h=>h.event_id);return a.filter(h=>!i.includes(h.id)&&h.status==="upcoming")},y=i=>{N(i),t(!0)},o=({event:i,showJoinButton:h=!1})=>{var M;return e.jsxs("div",{className:"clay-card p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:i.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:i.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:i.address})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsxs("span",{children:[i.date," a las ",i.time]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsxs("span",{children:[((M=i.participants)==null?void 0:M.length)||0," participantes"]})]})]})]}),e.jsx(_,{className:`rounded-full ${i.status==="upcoming"?"bg-mint-100 text-mint-700":i.status==="active"?"bg-baby-blue-100 text-baby-blue-700":"bg-lavender-100 text-lavender-700"}`,children:i.status==="upcoming"?"Próximo":i.status==="active"?"Activo":"Completado"})]}),i.materials_needed&&i.materials_needed.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Materiales necesarios:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.materials_needed.slice(0,3).map((x,j)=>e.jsx(_,{variant:"outline",className:"rounded-full text-xs",children:x},j)),i.materials_needed.length>3&&e.jsxs(_,{variant:"outline",className:"rounded-full text-xs",children:["+",i.materials_needed.length-3," más"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx(C,{variant:"outline",className:"clay-button rounded-2xl",onClick:()=>y(i),children:"Ver Detalles"}),h&&e.jsxs(C,{onClick:()=>E(i.id),className:"clay-button bg-mint-400 hover:bg-mint-500 text-white rounded-2xl",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Unirse"]})]})]})};return p?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded-2xl w-48 clay-card"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded-2xl clay-card"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded-2xl clay-card"})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black",children:"Eventos de Limpieza"}),e.jsx("p",{className:"text-gray-600",children:"Colabora para limpiar nuestra ciudad."})]}),e.jsx(q,{to:S("CreateEvent"),children:e.jsxs(C,{className:"clay-button bg-lavender-400 hover:bg-lavender-500 text-black rounded-2xl shadow-lg shadow-lavender-300/50",children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Crear evento"]})})]}),e.jsxs(K,{defaultValue:"available",className:"w-full",children:[e.jsxs(Y,{className:"grid w-full grid-cols-2 bg-gray-100 p-1.5 rounded-2xl",style:{boxShadow:"inset 0 2px 4px 0 rgba(0, 0, 0, 0.06)"},children:[e.jsx(z,{value:"available",className:"rounded-[14px] text-gray-500 py-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-mint-500 data-[state=active]:font-semibold data-[state=active]:shadow-sm transition-all duration-200",children:"Disponibles"}),e.jsx(z,{value:"my-events",className:"rounded-[14px] text-gray-500 py-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-lavender-500 data-[state=active]:font-semibold data-[state=active]:shadow-sm transition-all duration-200",children:"Mis Eventos"})]}),e.jsx(I,{value:"available",className:"space-y-4 mt-6",children:v().length>0?v().map(i=>e.jsx(o,{event:i,showJoinButton:!0},i.id)):e.jsxs("div",{className:"clay-card p-8 text-center",children:[e.jsx(A,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No hay eventos disponibles en este momento"})]})}),e.jsx(I,{value:"my-events",className:"space-y-4 mt-6",children:k().length>0?k().map(i=>e.jsx(o,{event:i,showJoinButton:!1},i.id)):e.jsxs("div",{className:"clay-card p-8 text-center",children:[e.jsx(D,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Aún no te has unido a ningún evento"})]})})]}),e.jsx(Ye,{open:w,onOpenChange:t,children:e.jsxs(We,{className:"max-w-2xl max-h-[80vh] overflow-y-auto clay-card",children:[e.jsx(Xe,{children:e.jsx(Qe,{className:"text-xl font-bold text-gray-800 pr-8",children:d==null?void 0:d.title})}),d&&e.jsxs("div",{className:"space-y-6",children:[d.organizer_photos&&d.organizer_photos.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-700",children:"Fotos del lugar"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:d.organizer_photos.map((i,h)=>e.jsx("img",{src:i,alt:`Foto del evento ${h+1}`,className:"w-full h-32 object-cover rounded-xl clay-card"},h))})]}),d.description&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-gray-700",children:"Descripción"}),e.jsx("p",{className:"text-gray-600",children:d.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-mint-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Ubicación"}),e.jsx("p",{className:"text-sm text-gray-600",children:d.address})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"w-5 h-5 text-baby-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Fecha y hora"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[d.date," a las ",d.time]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"w-5 h-5 text-lavender-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Participantes"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[((u=d.participants)==null?void 0:u.length)||0,d.max_participants&&` / ${d.max_participants}`," personas"]})]})]}),d.donation_goal>0&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-coral-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Meta de donaciones"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["$",(d.donations_received||0).toLocaleString("es-CO")," COP / $",d.donation_goal.toLocaleString("es-CO")," COP"]})]})]})]})]}),d.materials_needed&&d.materials_needed.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-700",children:"Materiales necesarios"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.materials_needed.map((i,h)=>e.jsx(_,{className:"bg-mint-100 text-mint-700 rounded-full",children:i},h))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[!n.find(i=>i.event_id===d.id)&&d.status==="upcoming"&&e.jsxs(C,{onClick:()=>{E(d.id),t(!1)},className:"clay-button bg-mint-400 hover:bg-mint-500 text-white rounded-2xl flex-1",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Unirse al evento"]}),d.donation_goal>0&&e.jsx(q,{to:S(`Donations?event_id=${d.id}`),className:"flex-1",children:e.jsx(C,{className:"clay-button bg-coral-400 hover:bg-coral-500 text-white rounded-2xl w-full",children:"💰 Donar"})})]})]})]})})]})}const W=X("Donation");function $({className:a="",...s}){return e.jsx("input",{className:`border border-gray-300 rounded-md px-3 py-2 w-full ${a}`,...s})}function je({className:a="",...s}){return e.jsx("textarea",{className:`border border-gray-300 rounded-md px-3 py-2 w-full ${a}`,...s})}function P({className:a="",...s}){return e.jsx("label",{className:`text-sm text-gray-700 ${a}`,...s})}function aa(){const[a,s]=m.useState([]),[n,l]=m.useState(null),[r,c]=m.useState(""),[p,b]=m.useState(""),[d,N]=m.useState("nequi"),[w,t]=m.useState(null),[g,E]=m.useState([]),[k,v]=m.useState(!0),[y,o]=m.useState(!1);m.useEffect(()=>{u();const j=new URLSearchParams(window.location.search).get("event_id");j&&i(j)},[]);const u=async()=>{try{const[x,j]=await Promise.all([F.list("-created_date"),Z.me()]);if(s(x.filter(U=>U.donation_goal>0)),t(j),j){const U=await W.filter({donor_email:j.email},"-created_date");E(U)}}catch(x){console.error("Error loading data:",x)}finally{v(!1)}},i=async x=>{try{const U=(await F.list()).find(be=>be.id===x);U&&U.donation_goal>0&&l(U)}catch(j){console.error("Error loading event:",j)}},h=async()=>{if(!(!n||!r||!w)){o(!0);try{await new Promise(j=>setTimeout(j,2e3)),await W.create({event_id:n.id,donor_email:w.email,donor_name:w.full_name||w.email,amount:parseFloat(r),message:p});const x=(n.donations_received||0)+parseFloat(r);await F.update(n.id,{donations_received:x}),c(""),b(""),l(null),u(),alert(`¡Gracias por tu donación de $${parseFloat(r).toLocaleString("es-CO")} COP!`)}catch(x){console.error("Error processing donation:",x),alert("Error al procesar la donación. Por favor intenta de nuevo.")}finally{o(!1)}}},M=({event:x})=>{const j=x.donation_goal>0?(x.donations_received||0)/x.donation_goal*100:0;return e.jsx(B,{className:"clay-card cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>l(x),children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:x.title}),e.jsx("p",{className:"text-sm text-gray-600",children:x.address})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Recaudado"}),e.jsxs("span",{className:"font-medium",children:["$",(x.donations_received||0).toLocaleString("es-CO")," / $",x.donation_goal.toLocaleString("es-CO")," COP"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-coral-400 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(j,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Math.round(j),"% de la meta"]})]})]})})})};return k?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded-2xl w-48 clay-card"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded-2xl clay-card"})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[n&&e.jsx(C,{variant:"outline",size:"icon",className:"clay-button rounded-2xl",onClick:()=>l(null),children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-gray-800",children:n?"Hacer Donación":"Donaciones"}),e.jsx("p",{className:"text-gray-600",children:n?"Apoya este evento de limpieza":"Apoya los eventos de limpieza de la ciudad"})]})]}),n?e.jsxs("div",{className:"space-y-6",children:[e.jsx(B,{className:"clay-card",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-coral-100 flex items-center justify-center",children:e.jsx(D,{className:"w-6 h-6 text-coral-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:n.address}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Meta de donaciones"}),e.jsxs("span",{className:"font-medium",children:["$",n.donation_goal.toLocaleString("es-CO")," COP"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Recaudado"}),e.jsxs("span",{className:"font-medium",children:["$",(n.donations_received||0).toLocaleString("es-CO")," COP"]})]})]})]})]})})}),e.jsxs(B,{className:"clay-card",children:[e.jsx(Le,{children:e.jsx(Ue,{children:"Realizar Donación"})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"amount",children:"Cantidad a donar (COP) *"}),e.jsx($,{id:"amount",type:"number",min:"1000",step:"1000",value:r,onChange:x=>c(x.target.value),placeholder:"50000",className:"rounded-2xl"}),e.jsx("div",{className:"flex gap-2 mt-2",children:[1e4,25e3,5e4,1e5].map(x=>e.jsxs(C,{variant:"outline",size:"sm",className:"rounded-2xl",onClick:()=>c(x.toString()),children:["$",x.toLocaleString("es-CO")]},x))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(P,{children:"Método de pago"}),e.jsxs(K,{value:d,onValueChange:N,children:[e.jsxs(Y,{className:"grid grid-cols-3 bg-gray-100 p-1 rounded-2xl",children:[e.jsxs(z,{value:"nequi",className:"rounded-xl",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Nequi"]}),e.jsxs(z,{value:"bank",className:"rounded-xl",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Banco"]}),e.jsxs(z,{value:"card",className:"rounded-xl",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Tarjeta"]})]}),e.jsx(I,{value:"nequi",className:"mt-4",children:e.jsxs("div",{className:"clay-card p-4 text-center",children:[e.jsx(oe,{className:"w-12 h-12 text-purple-500 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Serás redirigido a Nequi para completar el pago"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Necesitarás tu número de teléfono y clave Nequi"})]})}),e.jsx(I,{value:"bank",className:"mt-4",children:e.jsxs("div",{className:"clay-card p-4 text-center",children:[e.jsx(ie,{className:"w-12 h-12 text-blue-500 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Transferencia bancaria a través de PSE"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Compatible con todos los bancos en Colombia"})]})}),e.jsx(I,{value:"card",className:"mt-4",children:e.jsxs("div",{className:"clay-card p-4 text-center",children:[e.jsx(ce,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Pago con tarjeta de crédito o débito"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Visa, Mastercard, American Express"})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"message",children:"Mensaje opcional"}),e.jsx(je,{id:"message",value:p,onChange:x=>b(x.target.value),placeholder:"Escribe un mensaje de apoyo...",className:"rounded-2xl"})]}),e.jsx(C,{onClick:h,disabled:!r||y,className:"w-full clay-button bg-coral-400 hover:bg-coral-500 text-white rounded-2xl py-3",children:y?"Procesando...":`Donar $${r?parseFloat(r).toLocaleString("es-CO"):"0"} COP`})]})]})]}):e.jsxs(K,{defaultValue:"events",className:"w-full",children:[e.jsxs(Y,{className:"grid w-full grid-cols-2 bg-gray-100 p-1.5 rounded-2xl",children:[e.jsx(z,{value:"events",className:"rounded-[14px] text-gray-500 py-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-coral-500 data-[state=active]:font-semibold data-[state=active]:shadow-sm transition-all duration-200",children:"Eventos"}),e.jsx(z,{value:"history",className:"rounded-[14px] text-gray-500 py-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-coral-500 data-[state=active]:font-semibold data-[state=active]:shadow-sm transition-all duration-200",children:"Mis Donaciones"})]}),e.jsx(I,{value:"events",className:"space-y-4 mt-6",children:a.length>0?e.jsx("div",{className:"grid gap-4",children:a.map(x=>e.jsx(M,{event:x},x.id))}):e.jsxs("div",{className:"clay-card p-8 text-center",children:[e.jsx(D,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No hay eventos que necesiten donaciones"})]})}),e.jsx(I,{value:"history",className:"space-y-4 mt-6",children:g.length>0?e.jsx("div",{className:"space-y-4",children:g.map(x=>e.jsx(B,{className:"clay-card",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800",children:["$",x.amount.toLocaleString("es-CO")," COP"]}),e.jsx("p",{className:"text-sm text-gray-600",children:x.created_date}),x.message&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:['"',x.message,'"']})]}),e.jsx(Ze,{className:"w-5 h-5 text-green-500"})]})})},x.id))}):e.jsxs("div",{className:"clay-card p-8 text-center",children:[e.jsx(D,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Aún no has realizado donaciones"})]})})]})]})}function sa(){var v;const[a,s]=m.useState(null),[n,l]=m.useState([]),[r,c]=m.useState([]),[p,b]=m.useState([]),[d,N]=m.useState({totalEvents:0,totalHours:0,totalDonations:0,eventsCreated:0}),[w,t]=m.useState(!0);m.useEffect(()=>{g()},[]);const g=async()=>{try{const y=await Z.me();s(y);const[o,u,i]=await Promise.all([J.filter({user_email:y.email},"-created_date"),F.filter({created_by:y.email},"-created_date"),W.filter({donor_email:y.email},"-created_date")]);l(o),c(u),b(i);const h=o.reduce((x,j)=>x+(j.hours_contributed||0),0),M=i.reduce((x,j)=>x+j.amount,0);N({totalEvents:o.length,totalHours:h,totalDonations:M,eventsCreated:u.length})}catch(y){console.error("Error loading user data:",y)}finally{t(!1)}},E=async()=>{try{await Z.logout()}catch(y){console.error("Error logging out:",y)}},k=({title:y,value:o,icon:u,color:i,suffix:h=""})=>e.jsx(B,{className:"clay-card",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:y}),e.jsxs("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:[o,h]})]}),e.jsx("div",{className:`p-3 rounded-2xl ${i}`,children:e.jsx(u,{className:"w-6 h-6 text-white"})})]})})});return w?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded-2xl w-48 clay-card"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"h-24 bg-gray-200 rounded-2xl clay-card"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded-2xl clay-card"})]})]})}):a?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"clay-card p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-mint-400 to-baby-blue-400 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl font-bold",children:((v=a.full_name)==null?void 0:v.charAt(0))||a.email.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:a.full_name||"Usuario"}),e.jsx("p",{className:"text-gray-600",children:a.email}),e.jsx(_,{className:"mt-2 bg-mint-100 text-mint-700 rounded-full",children:"Eco-Voluntario"})]})]}),e.jsx(C,{onClick:E,variant:"outline",className:"clay-button rounded-2xl",children:"Cerrar Sesión"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(k,{title:"Eventos Participados",value:d.totalEvents,icon:A,color:"bg-mint-400"}),e.jsx(k,{title:"Horas Contribuidas",value:d.totalHours,icon:qe,color:"bg-baby-blue-400"}),e.jsx(k,{title:"Total Donado",value:d.totalDonations.toLocaleString("es-CO"),icon:D,color:"bg-coral-400",suffix:" COP"}),e.jsx(k,{title:"Eventos Creados",value:d.eventsCreated,icon:V,color:"bg-lavender-400"})]}),e.jsxs("div",{className:"clay-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5"}),"Logros Eco-Friendly"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.totalEvents>=1&&e.jsx(_,{className:"bg-mint-100 text-mint-700 p-3 rounded-2xl text-center",children:"🌱 Primer Paso"}),d.totalEvents>=5&&e.jsx(_,{className:"bg-baby-blue-100 text-baby-blue-700 p-3 rounded-2xl text-center",children:"🌿 Eco-Guerrero"}),d.totalHours>=10&&e.jsx(_,{className:"bg-lavender-100 text-lavender-700 p-3 rounded-2xl text-center",children:"⏰ Tiempo Verde"}),d.totalDonations>0&&e.jsx(_,{className:"bg-coral-100 text-coral-700 p-3 rounded-2xl text-center",children:"💚 Corazón Generoso"})]})]}),e.jsxs("div",{className:"clay-card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Actividad Reciente"}),e.jsxs("div",{className:"space-y-3",children:[n.slice(0,3).map((y,o)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-2xl",children:[e.jsx(A,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Te uniste a un evento"}),e.jsx("p",{className:"text-xs text-gray-500",children:y.joined_date})]})]},y.id)),n.length===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Aún no has participado en ningún evento"})]})]})]}):e.jsxs("div",{className:"p-6 text-center clay-card m-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Bienvenido a EcoClean"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Inicia sesión para comenzar a participar en eventos de limpieza"}),e.jsx(C,{onClick:()=>Z.login(),className:"clay-button bg-mint-400 hover:bg-mint-500 text-white rounded-2xl",children:"Iniciar Sesión con Google"})]})}async function ta({file:a}){return new Promise(s=>{const n=URL.createObjectURL(a);s({file_url:n})})}function ra(){const a=fe(),[s,n]=m.useState({title:"",description:"",address:"",date:"",time:"",materials_needed:[],donation_goal:"",max_participants:""}),[l,r]=m.useState(""),[c,p]=m.useState([]),[b,d]=m.useState(!1),[N,w]=m.useState(!1),t=(o,u)=>{n(i=>({...i,[o]:u}))},g=()=>{l.trim()&&(n(o=>({...o,materials_needed:[...o.materials_needed,l.trim()]})),r(""))},E=o=>{n(u=>({...u,materials_needed:u.materials_needed.filter((i,h)=>h!==o)}))},k=async o=>{d(!0);try{const u=Array.from(o).map(async h=>(await ta({file:h})).file_url),i=await Promise.all(u);p(h=>[...h,...i])}catch(u){console.error("Error uploading photos:",u)}finally{d(!1)}},v=o=>{p(u=>u.filter((i,h)=>h!==o))},y=async o=>{o.preventDefault(),w(!0);try{const u=await Z.me(),i={latitude:40.4168+(Math.random()-.5)*.1,longitude:-3.7038+(Math.random()-.5)*.1};await F.create({...s,...i,organizer_photos:c,participants:[u.email],donation_goal:parseFloat(s.donation_goal)||0,max_participants:parseInt(s.max_participants)||50,donations_received:0,status:"upcoming"}),a(S("Events"))}catch(u){console.error("Error creating event:",u)}finally{w(!1)}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(q,{to:S("Events"),children:e.jsx(C,{variant:"outline",size:"icon",className:"clay-button rounded-2xl",children:e.jsx(ge,{className:"w-4 h-4"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Crear Evento"}),e.jsx("p",{className:"text-gray-600",children:"Organiza una jornada de limpieza"})]})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"clay-card p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Información Básica"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"title",children:"Título del Evento *"}),e.jsx($,{id:"title",value:s.title,onChange:o=>t("title",o.target.value),placeholder:"Ej: Limpieza del Parque del Retiro",className:"rounded-2xl",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"description",children:"Descripción"}),e.jsx(je,{id:"description",value:s.description,onChange:o=>t("description",o.target.value),placeholder:"Describe los objetivos y detalles del evento...",className:"rounded-2xl min-h-[100px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"address",children:"Dirección *"}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx($,{id:"address",value:s.address,onChange:o=>t("address",o.target.value),placeholder:"Dirección completa del lugar",className:"rounded-2xl pl-10",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"date",children:"Fecha *"}),e.jsx($,{id:"date",type:"date",value:s.date,onChange:o=>t("date",o.target.value),className:"rounded-2xl",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"time",children:"Hora *"}),e.jsx($,{id:"time",type:"time",value:s.time,onChange:o=>t("time",o.target.value),className:"rounded-2xl",required:!0})]})]})]}),e.jsxs("div",{className:"clay-card p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Materiales Necesarios"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{value:l,onChange:o=>r(o.target.value),placeholder:"Ej: Guantes, bolsas de basura...",className:"rounded-2xl",onKeyPress:o=>o.key==="Enter"&&(o.preventDefault(),g())}),e.jsx(C,{type:"button",onClick:g,className:"clay-button bg-mint-400 hover:bg-mint-500 text-white rounded-2xl",children:"Añadir"})]}),s.materials_needed.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:s.materials_needed.map((o,u)=>e.jsxs("div",{className:"flex items-center gap-2 bg-mint-100 text-mint-700 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:o}),e.jsx("button",{type:"button",onClick:()=>E(u),className:"hover:bg-mint-200 rounded-full p-1",children:e.jsx(de,{className:"w-3 h-3"})})]},u))})]}),e.jsxs("div",{className:"clay-card p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Fotos del Lugar"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-6 text-center",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:o=>k(o.target.files),className:"hidden",id:"photo-upload"}),e.jsxs("label",{htmlFor:"photo-upload",className:"cursor-pointer",children:[e.jsx(He,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Haz clic para subir fotos del área a limpiar"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"PNG, JPG hasta 10MB"})]})]}),c.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-4",children:c.map((o,u)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:o,alt:`Foto ${u+1}`,className:"w-full h-32 object-cover rounded-2xl clay-card"}),e.jsx("button",{type:"button",onClick:()=>v(u),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(de,{className:"w-4 h-4"})})]},u))})]}),e.jsxs("div",{className:"clay-card p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Configuración Adicional"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"donation_goal",children:"Meta de Donaciones (COP)"}),e.jsx($,{id:"donation_goal",type:"number",min:"0",step:"100",value:s.donation_goal,onChange:o=>t("donation_goal",o.target.value),placeholder:"50000",className:"rounded-2xl"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"max_participants",children:"Máximo Participantes"}),e.jsx($,{id:"max_participants",type:"number",min:"1",value:s.max_participants,onChange:o=>t("max_participants",o.target.value),placeholder:"50",className:"rounded-2xl"})]})]})]}),e.jsx(C,{type:"submit",disabled:N||b,className:"w-full clay-button bg-lavender-400 hover:bg-lavender-500 text-white rounded-2xl py-3",children:N?"Creando evento...":"Crear Evento"})]})]})}const la=[{title:"Mapa",url:S("Map"),icon:L,color:"bg-mint-100",shadowColor:"shadow-mint-200"},{title:"Eventos",url:S("Events"),icon:A,color:"bg-lavender-100",shadowColor:"shadow-lavender-200"},{title:"Perfil",url:S("Profile"),icon:Ve,color:"bg-baby-blue-100",shadowColor:"shadow-baby-blue-200"},{title:"Donaciones",url:S("Donations"),icon:D,color:"bg-coral-100",shadowColor:"shadow-coral-200"}];function na({children:a,currentPageName:s}){const n=Ne();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-mint-50 to-baby-blue-50",children:[e.jsx("style",{children:`
        :root {
          --mint-50: #f0fdf4;
          --mint-100: #dcfce7;
          --mint-200: #bbf7d0;
          --mint-300: #86efac;
          --mint-400: #4ade80;
          --mint-500: #22c55e;
          
          --baby-blue-50: #f0f9ff;
          --baby-blue-100: #e0f2fe;
          --baby-blue-200: #bae6fd;
          --baby-blue-300: #7dd3fc;
          --baby-blue-400: #38bdf8;
          --baby-blue-500: #0ea5e9;
          
          --lavender-50: #faf5ff;
          --lavender-100: #f3e8ff;
          --lavender-200: #e9d5ff;
          --lavender-300: #d8b4fe;
          --lavender-400: #c084fc;
          --lavender-500: #a855f7;
          
          --coral-50: #fef2f2;
          --coral-100: #fee2e2;
          --coral-200: #fecaca;
          --coral-300: #fca5a5;
          --coral-400: #f87171;
          --coral-500: #ef4444;
        }
        
        .bg-mint-50 { background-color: var(--mint-50); }
        .bg-mint-100 { background-color: var(--mint-100); }
        .bg-mint-200 { background-color: var(--mint-200); }
        .bg-baby-blue-50 { background-color: var(--baby-blue-50); }
        .bg-baby-blue-100 { background-color: var(--baby-blue-100); }
        .bg-baby-blue-200 { background-color: var(--baby-blue-200); }
        .bg-lavender-100 { background-color: var(--lavender-100); }
        .bg-lavender-200 { background-color: var(--lavender-200); }
        .bg-coral-100 { background-color: var(--coral-100); }
        .bg-coral-200 { background-color: var(--coral-200); }
        
        .shadow-mint-200 { box-shadow: 0 8px 25px -8px var(--mint-200), inset 0 1px 0 rgba(255,255,255,0.6); }
        .shadow-baby-blue-200 { box-shadow: 0 8px 25px -8px var(--baby-blue-200), inset 0 1px 0 rgba(255,255,255,0.6); }
        .shadow-lavender-200 { box-shadow: 0 8px 25px -8px var(--lavender-200), inset 0 1px 0 rgba(255,255,255,0.6); }
        .shadow-coral-200 { box-shadow: 0 8px 25px -8px var(--coral-200), inset 0 1px 0 rgba(255,255,255,0.6); }
        
        .clay-card {
          background: linear-gradient(145deg, #ffffff, #f8fafc);
          box-shadow: 
            0 8px 32px -8px rgba(0, 0, 0, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.8),
            inset 0 -1px 0 rgba(0, 0, 0, 0.05);
          border-radius: 20px;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .clay-card:hover {
          transform: translateY(-2px);
          box-shadow: 
            0 12px 40px -8px rgba(0, 0, 0, 0.15),
            inset 0 1px 0 rgba(255, 255, 255, 0.9),
            inset 0 -1px 0 rgba(0, 0, 0, 0.05);
        }
        
        .clay-button {
          border-radius: 16px;
          transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
          box-shadow: 
            0 4px 14px -4px rgba(0, 0, 0, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }
        
        .clay-button:hover {
          transform: translateY(-1px);
          box-shadow: 
            0 6px 20px -4px rgba(0, 0, 0, 0.15),
            inset 0 1px 0 rgba(255, 255, 255, 0.8);
        }
        
        .clay-button:active {
          transform: translateY(0px);
          box-shadow: 
            0 2px 8px -2px rgba(0, 0, 0, 0.1),
            inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }
      `}),e.jsx("header",{className:"sticky top-0 z-50 backdrop-blur-xl bg-white/80",children:e.jsx("div",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-mint-400 to-baby-blue-400 flex items-center justify-center clay-card",children:e.jsx(L,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white text-lg font-bold",children:"🌱"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-green-600 text-xl font-bold",children:"EcoClay"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Limpiemos nuestra ciudad"})]})]})]})})})}),e.jsx("main",{className:"pb-24",children:a}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-xl border-t border-gray-100",children:e.jsx("div",{className:"px-4 py-2",children:e.jsx("div",{className:"flex justify-around items-center",children:la.map(l=>{const r=n.pathname===l.url;return e.jsxs(q,{to:l.url,className:`flex flex-col items-center py-2 px-3 rounded-2xl transition-all duration-300 ${r?`${l.color} ${l.shadowColor} scale-105`:"hover:bg-gray-50"}`,children:[e.jsx(l.icon,{className:`w-6 h-6 mb-1 ${r?"text-gray-700":"text-gray-400"}`}),e.jsx("span",{className:`text-xs font-medium ${r?"text-gray-700":"text-gray-400"}`,children:l.title})]},l.title)})})})})]})}function ia(){return e.jsx(we,{children:e.jsx(na,{children:e.jsxs(Ce,{children:[e.jsx(O,{path:"/",element:e.jsx(ee,{to:"/map",replace:!0})}),e.jsx(O,{path:"/map",element:e.jsx(Ge,{})}),e.jsx(O,{path:"/events",element:e.jsx(ea,{})}),e.jsx(O,{path:"/donations",element:e.jsx(aa,{})}),e.jsx(O,{path:"/profile",element:e.jsx(sa,{})}),e.jsx(O,{path:"/create-event",element:e.jsx(ra,{})}),e.jsx(O,{path:"*",element:e.jsx(ee,{to:"/map",replace:!0})})]})})})}const ca=ue(document.getElementById("root"));ca.render(e.jsx(ia,{}));
